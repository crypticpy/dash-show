<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Data Visualization Dashboard Showcase</title>
    <meta
      name="description"
      content="Curated showcase of municipal CIP, Power BI reports, and visualization patterns for project prioritization and ranking."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Modular CSS -->
    <link rel="stylesheet" href="styles/variables.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/modals.css" />
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Mobile Filter Drawer Toggle -->
    <button class="filter-drawer-toggle" id="filterDrawerToggle" aria-label="Open filters">
      <span aria-hidden="true">â˜°</span>
    </button>

    <!-- Filter Drawer Overlay (Mobile) -->
    <div class="filter-drawer-overlay" id="filterDrawerOverlay"></div>

    <!-- Faceted Filter Drawer -->
    <aside class="filter-drawer" id="filterDrawer" aria-label="Filter controls">
      <div class="filter-drawer-header">
        <h2>Filters</h2>
        <button class="filter-drawer-close" id="filterDrawerClose" aria-label="Close filters">
          <span aria-hidden="true">âœ•</span>
        </button>
      </div>

      <div class="filter-drawer-content">
        <!-- Search -->
        <div class="filter-group">
          <h3>Search</h3>
          <div class="search-wrapper">
            <input
              id="q"
              type="search"
              placeholder="Search title, domain, tagsâ€¦"
              autocomplete="off"
              aria-label="Search dashboards"
            />
          </div>
        </div>

        <!-- Platform Filter Group -->
        <div class="filter-group">
          <h3>Platform</h3>
          <div id="chips-platform" class="chips"></div>
        </div>

        <!-- Use Case Filter Group -->
        <div class="filter-group">
          <h3>Use Case</h3>
          <div id="chips-usecase" class="chips"></div>
        </div>

        <!-- Audience Filter Group -->
        <div class="filter-group">
          <h3>Audience</h3>
          <div id="chips-audience" class="chips"></div>
        </div>

        <!-- Pattern Filter Group -->
        <div class="filter-group">
          <h3>Pattern</h3>
          <div id="chips-pattern" class="chips"></div>
        </div>

        <!-- Other Tags Filter Group -->
        <div class="filter-group">
          <h3>Other Tags</h3>
          <div id="chips-other" class="chips"></div>
        </div>
      </div>
    </aside>

    <header role="banner">
      <div class="wrap hero">
        <div class="title">
          <div class="logo" aria-hidden="true"><span>DV</span></div>
          <div class="title-text">
            <h1>Data Visualization Dashboard Showcase</h1>
            <p class="subtitle">
              <span class="subtitle-count"
                ><strong id="siteCount">0</strong><span id="filterIndicator"></span> dashboards curated</span
              >
              <span class="subtitle-detail"
                >A curated collection for municipal professionals seeking inspiration and best practices in data visualization and dashboard design.</span
              >
            </p>
          </div>
        </div>
        <nav class="controls" aria-label="Filter and search controls">
          <select
            id="roleSelect"
            title="Select learning perspective"
            aria-label="Select learning perspective"
          >
            <option value="student">Participant view</option>
            <option value="coach">Coach view</option>
          </select>
          <select id="sortBy" title="Sort">
            <option value="default">Sort: Default</option>
            <option value="title">Sort: Title (Aâ†’Z)</option>
            <option value="domain">Sort: Domain (Aâ†’Z)</option>
          </select>
          <button id="toggleLearning" aria-label="Toggle learning mode">ðŸ“š Learning Mode</button>
          <button id="clearFilters" class="btn-clear" aria-label="Clear all filters" style="display:none;">Clear filters âœ•</button>
        </nav>
      </div>
    </header>

    <main role="main" id="main-content">
      <div class="wrap">
        <!-- Active Filters Row (NEW) -->
        <div id="activeFilters" class="active-filters-row" style="display:none;" role="status" aria-live="polite" aria-label="Active filters">
          <!-- Dynamically populated removable filter chips -->
        </div>

        <div class="grid" id="grid" aria-live="polite" aria-label="Dashboard cards">
          <!-- cards populated via JS -->
        </div>

        <p class="meta notice">
          Thumbnails are generated from public URLs using snapshot services.
          Blurbs are fetched automatically from each page's readable content
          (proxied for CORS). If a site blocks snapshots or content, the card
          will fall back gracefully.
        </p>
        <p class="meta notice" id="learningTip">
          Tip: Enable ðŸ“š Learning Mode to follow guided prompts and print a
          personal study guide.
        </p>
      </div>
    </main>

    <!-- Learning Mode Overlay -->
    <div id="learningOverlay" class="learning-overlay" aria-modal="true" role="dialog" aria-labelledby="learningTitle">
      <div class="learning-panel" id="learningPanel">
        <header class="learning-header">
          <h2 id="learningTitle">ðŸ“š Learning Mode</h2>
          <button id="closeLearning" class="learning-close" aria-label="Close learning mode">âœ•</button>
        </header>
        <div class="learning-body">
          <div id="checklistContent" class="learning-checklist"></div>
        </div>
        <footer class="learning-footer">
          <button id="printChecklist" class="btn primary">Print Study Guide</button>
        </footer>
      </div>
    </div>

    <!-- Detail Modal -->
    <div id="detailOverlay" class="detail-overlay" aria-modal="true" role="dialog" aria-labelledby="detailTitle">
      <article class="detail-modal" id="detailModal">
        <button id="closeDetail" class="detail-close" aria-label="Close detail view">âœ•</button>
        <header class="detail-header">
          <div class="detail-category" id="detailCategory"></div>
          <h2 id="detailTitle" class="detail-title"></h2>
          <p id="detailDomain" class="detail-domain"></p>
        </header>
        <div class="detail-body" id="detailBody">
          <div class="detail-media" id="detailMedia">
            <img id="detailScreenshot" alt="" loading="lazy" />
          </div>
          <div class="detail-copy">
            <p id="detailSummary" class="detail-summary"></p>
            <div id="detailBlurb" class="detail-blurb"></div>
            <section class="detail-meta">
              <div class="detail-meta-group">
                <h3>Tags</h3>
                <div id="detailTags" class="detail-chips"></div>
              </div>
              <div class="detail-meta-group">
                <h3>Techniques</h3>
                <div id="detailTechniques" class="detail-chips"></div>
              </div>
            </section>
          </div>
        </div>
        <footer class="detail-actions">
          <a id="detailVisit" class="btn primary" target="_blank" rel="noopener"
            >Open Dashboard â†—</a
          >
        </footer>
      </article>
    </div>

    <!-- Onboarding Overlay -->
    <div id="onboardingOverlay" class="onboarding-overlay" aria-modal="true" role="dialog" aria-labelledby="onboardingTitle" hidden>
      <div class="onboarding-modal">
        <button id="onboardingClose" class="onboarding-close" aria-label="Close onboarding">âœ•</button>
        <div id="onboardingContent" class="onboarding-content"></div>
      </div>
    </div>

    <!-- Learning Mode Template -->
    <template id="learning-panel-template">
      <div class="learning-section">
        <h4></h4>
        <div class="learning-content"></div>
        <div class="learning-notes">
          <h4>Your Notes</h4>
          <textarea id="reviewNotes" placeholder="Take notes as you exploreâ€¦" aria-label="Learning notes"></textarea>
        </div>
      </div>
    </template>

    <!-- Modular JavaScript (ES6 Modules) -->
    <script type="module" src="scripts/main.js"></script>
  </body>
</html>
